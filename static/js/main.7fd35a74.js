(()=>{const e="168771779c71f3d64106d8a88376808a",t=document.querySelector("[data-userWeather]"),a=document.querySelector("[data-searchWeather]"),o=document.querySelector("[data-searchForm]"),i=document.querySelector(".userInfoContainer"),s=document.querySelector(".grantLocationContainer"),c=document.querySelector(".loadingContainer"),n=document.querySelector(".errorContainer"),r=document.querySelector("[data-errorButton]"),d=document.querySelector("[data-errorText]"),l=document.querySelector("[data-errorImg]");let u=t;function v(e){n.classList.remove("active"),u!=e&&(u.classList.remove("currentTab"),u=e,u.classList.add("currentTab"),o.classList.contains("active")?(o.classList.remove("active"),i.classList.remove("active"),m()):(o.classList.add("active"),i.classList.remove("active"),s.classList.remove("active")))}function m(){const e=sessionStorage.getItem("userCoordinates");if(e){y(JSON.parse(e))}else s.classList.add("active")}async function y(t){const{lat:a,lon:o}=t;s.classList.remove("active"),c.classList.add("active");try{const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${a}&lon=${o}&appid=${e}&units=metric`),s=await t.json();if(!s.sys)throw s;c.classList.remove("active"),i.classList.add("active"),L(s)}catch(u){c.classList.remove("active"),n.classList.add("active"),l.style.display="none",d.innerText=`Error: ${null===u||void 0===u?void 0:u.message}`,r.style.display="block",r.addEventListener("click",y)}}function L(e){var t,a,o,i,s,c,n,r,d;const l=document.querySelector("[data-cityName]"),u=document.querySelector("[data-countryFlag]"),v=document.querySelector("[data-weatherDesc]"),m=document.querySelector("[data-weatherIcon]"),y=document.querySelector("[data-temp]"),L=document.querySelector("[data-windspeed]"),p=document.querySelector("[data-humidity]"),h=document.querySelector("[data-clouds]");l.innerText=null===e||void 0===e?void 0:e.name,u.src=`https://flagcdn.com/144x108/${null===e||void 0===e||null===(t=e.sys)||void 0===t?void 0:t.country.toLowerCase()}.png`,v.innerText=null===e||void 0===e||null===(a=e.weather)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.description,m.src=`http://openweathermap.org/img/w/${null===e||void 0===e||null===(i=e.weather)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.icon}.png`,y.innerText=`${null===e||void 0===e||null===(c=e.main)||void 0===c?void 0:c.temp.toFixed(2)} \xb0C`,L.innerText=`${null===e||void 0===e||null===(n=e.wind)||void 0===n?void 0:n.speed.toFixed(2)} m/s`,p.innerText=`${null===e||void 0===e||null===(r=e.main)||void 0===r?void 0:r.humidity.toFixed(2)} %`,h.innerText=`${null===e||void 0===e||null===(d=e.clouds)||void 0===d?void 0:d.all.toFixed(2)} %`}u.classList.add("currentTab"),m(),t.addEventListener("click",(()=>{v(t)})),a.addEventListener("click",(()=>{v(a)}));const p=document.querySelector("[data-grantAccess]");function h(e){const t={lat:e.coords.latitude,lon:e.coords.longitude};sessionStorage.setItem("userCoordinates",JSON.stringify(t)),y(t)}p.addEventListener("click",(function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(h):p.style.display="none"}));const g=document.querySelector("[data-searchInput]");o.addEventListener("submit",(t=>{t.preventDefault(),""!==g.value&&(!async function(t){c.classList.add("active"),i.classList.remove("active"),s.classList.remove("active"),n.classList.remove("active");try{const a=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${t}&appid=${e}&units=metric`),o=await a.json();if(!o.sys)throw o;c.classList.remove("active"),i.classList.add("active"),L(o)}catch(a){c.classList.remove("active"),i.classList.remove("active"),n.classList.add("active"),d.innerText=`${null===a||void 0===a?void 0:a.message}`,r.style.display="none"}}(g.value),g.value="")}))})();
//# sourceMappingURL=main.7fd35a74.js.map